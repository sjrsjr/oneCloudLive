<!-- 出租信表单 -->
<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>一朵云上住 - 出租</title>
  <link rel="stylesheet" type="text/css" href="css/reset.css"/>
  <link rel="stylesheet" href="css/picker.min.css">
  <link rel="stylesheet" href="css/webuploader.css">
  <link rel="stylesheet" type="text/css" href="css/main.css"/>
</head>

<body>
<div class="wrap-no rent">

  <!-- 信息缺省提示 -->
  <div id="pleaseFill" class="test">
    <div class="mask"></div>
    <ul>
      <li>请填写完整的信息</li>
      <li id="sure"></li>
    </ul>
  </div>

  <div class="main rent-main">
    <ul>

      <!-- 标题 -->
      <li class="rent-title">
        <span class="pen">现在我们来写一份出租信</span>
        <img src="img/xiexin@2x.png" alt="">
      </li>

      <!-- 选择地铁 -->
      <li class="subway">
        <p>你好请看过来，我这里有房子出租，</p>
        <span>房子的地点在：</span>
        <!-- 选项 -->
        <ul id="subway-list">
          <li>
            <label>
              <select name="">
                <option value="">西二旗</option>
              </select>
            </label>
            <label class="middle">
              <select name="">
                <option value="">13号线</option>
              </select>
            </label>
            <label>
              <select name="">
                <option value="">海淀区</option>
              </select>
            </label>
          </li>
        </ul>
      </li>

      <!-- 填写信息 -->
      <li class="global-input location">
        <p class="title">出租的房子情况是这样的</p>
        <textarea class="detail" placeholder="请点击输入" words="10-300" oninput="checkout(this)"></textarea>
      </li>

      <li class="global-input cost">
        <p class="title">房子的价格和租期，请你看一下（1K=1000）</p>
        <textarea class="detail" placeholder="请点击输入" words="10-300" oninput="checkout(this)"></textarea>
      </li>

      <li class="global-input people">
        <p class="title">房东/室友/中介的情况，我必须与你介绍清楚</p>
        <textarea class="detail" placeholder="请点击输入" words="10-300" oninput="checkout(this)"></textarea>
      </li>

      <li class="global-input you">
        <p class="title">我希望来租房的你，是这样的</p>
        <textarea class="detail" placeholder="请点击输入" words="10-300" oninput="checkout(this)"></textarea>
      </li>

      <li class="global-input me">
        <p class="title">在这里简单介绍下我的情况，你会相信我说的话</p>
        <textarea class="detail" placeholder="请点击输入" words="10-300" oninput="checkout(this)"></textarea>
      </li>

      <li class="global-input connect">
        <p class="title">请你记一下我的联系微信号/常用邮箱，联系我就行</p>
        <textarea class="detail" placeholder="请点击输入" words="10-300" oninput="checkout(this)"></textarea>
      </li>

      <li class="global-input delay">
        <p class="title">我的求租信有效期到这一天，过了这天我就删除了</p>
        <div class="detail">
          <span id="date">请选择日期</span>
          <span id="picker"></span>
        </div>
      </li>

      <li class="global-input phone">
        <p class="title">我的备用联系电话号在这里</p>
        <textarea class="detail" placeholder="请点击输入" words="5-10" oninput="checkout(this)"></textarea>
      </li>
    </ul>

    <!-- 上传照片 -->
    <div class="uploadPhoto">
      <span class="title">你想看的房间照片，我上传到这里了</span>
      <span id="file-picker">（点我上传）</span>
      <div id="photo-list"></div>
    </div>

    <!-- 确定按钮 -->
    <div id="enter">
      <button id="enter-button"></button>
    </div>
  </div>

</div>

</body>
<script src="js/jQuery-1.12.4min.js"></script>
<script src="js/match.js"></script>
<script src="js/labelMach.js"></script>
<script src="js/picker.min.js"></script>
<script src="js/webuploader.min.js"></script>
<script>
  $(document).ready(function () {

    // 初始化uploader
    var uploader = WebUploader.create({

      // 选完文件后，是否自动上传。
      auto: false,

      // 文件接收服务端。
      server: './fileupload.php',

      // 选择文件的按钮。可选。
      // 内部根据当前运行是创建，可能是input元素，也可能是flash.
      pick: '#file-picker',

      // 图片压缩
      compress: {
        width: 100,
        height: 100,

        // 图片质量，只有type为`image/jpeg`的时候才有效。
        quality: 10,

        // 是否允许放大，如果想要生成小图的时候不失真，此选项应该设置为false.
        allowMagnify: false,

        // 是否允许裁剪。
        crop: false,

        // 是否保留头部meta信息。
        preserveHeaders: true,

        // 如果发现压缩后文件大小比原来还大，则使用原来图片
        // 此属性可能会影响图片自动纠正功能
        noCompressIfLarger: false,

        // 单位字节，如果图片大小小于此值，不会采用压缩。
        compressSize: 0
      },

      // 只允许选择图片文件。
      accept: {
        title: 'Images',
        extensions: 'jpg,jpeg,bmp,png',
        mimeTypes: 'image/jpg,image/jpeg,image/png,images/bmp'
      }
    });

    // 当有文件添加进来的时候
    uploader.onFileQueued = function (file) {
      var $li = $(
        '<div id="' + file.id + '" class="file-item thumbnail">' +
        '<img />' +
        '</div>'
        ),
        $cancel = $('<span class="cancel"></span>'),
        $img = $li.find('img');

      $li.append($cancel)

      // $list为容器jQuery实例
      $('#photo-list').append($li);

      // 删除图片
      $cancel.on('click', function () {
        uploader.removeFile(file, true)
        $li.off().find('.file-panel').off().end().remove();
      })

      // 创建缩略图
      uploader.makeThumb(file, function (error, src) {
        if (error) {
          $img.replaceWith('<span>不能预览</span>');
          return;
        }
        $img.attr('src', src);
      }, 100, 100);
    };

    // 确定按钮（表单验证 + 上传）
    $("#enter-button").on('click', function () {
      submit(function () {
        uploader.upload()
        window.location.href = "rentLabel.html"
      })
    })
  })
</script>

</html>